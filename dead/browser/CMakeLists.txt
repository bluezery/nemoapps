SET(CONFXML "browser.conf")
SET(APPNAME "nemobrowser")
SET(ICON_DIR "${ICON_DIR}/browser")
SET(IMG_DIR "${IMG_DIR}/browser")
ADD_DEFINITIONS(-DAPPNAME="${APPNAME}")
ADD_DEFINITIONS(-DCONFXML="${CONFXML}")
ADD_DEFINITIONS(-DICON_DIR="${ICON_DIR}")
ADD_DEFINITIONS(-DIMG_DIR="${IMG_DIR}")

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${CMAKE_C_FLAGS} -std=c++11")
set(CMAKE_LINK_FLAGS "${CMAKE_LINK_FLAGS}")

PKG_CHECK_MODULES(NEMONAVI REQUIRED nemonavi)
INCLUDE_DIRECTORIES(${NEMONAVI_INCLUDE_DIRS})
LINK_DIRECTORIES(${NEMONAVI_LIBRARY_DIRS})

CONFIGURE_FILE(${CONFXML}.in ${CONFXML} @ONLY)

ADD_EXECUTABLE(${APPNAME}
	browser.c
	dispatch.c
)

ADD_DEPENDENCIES(${APPNAME} xemoutil nemodavi)

TARGET_LINK_LIBRARIES(${APPNAME}
	cef
	nemodavi
	xemoutil
	${NEMOAPPS_COMMON_LIBRARIES}
	${NEMONAVI_LIBRARIES}
	${NEMOUTIL_LIBRARIES}
	${GL_LIBRARIES}
	${EGL_LIBRARIES}
)

INSTALL(TARGETS ${APPNAME}
	DESTINATION bin
)
INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/${CONFXML}
	DESTINATION ${ETC_DIR}
)

INSTALL(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/images/
	DESTINATION  ${IMG_DIR}
)
